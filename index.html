<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crtiz Models</title>
  <style>
    body { margin: 0; overflow: hidden; }
  </style>
</head>
<body>
  <script type="module">
    import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.module.js';

    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0xa0d8ff);

    const camera = new THREE.PerspectiveCamera(
      75,
      window.innerWidth / window.innerHeight,
      0.1,
      1000
    );
    camera.position.set(5, 5, 5);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444);
    hemiLight.position.set(0, 20, 0);
    scene.add(hemiLight);
    const dirLight = new THREE.DirectionalLight(0xffffff);
    dirLight.position.set(3, 10, 10);
    scene.add(dirLight);

    const groundGeo = new THREE.PlaneGeometry(200, 200);
    const groundMat = new THREE.MeshPhongMaterial({ color: 0x999999, depthWrite: false });
    const ground = new THREE.Mesh(groundGeo, groundMat);
    ground.rotation.x = -Math.PI / 2;
    ground.receiveShadow = true;
    scene.add(ground);

    function createSquirrel() {
      const group = new THREE.Group();
      const brown = 0x8b4513;
      const material = new THREE.MeshStandardMaterial({ color: brown });

      const body = new THREE.Mesh(new THREE.SphereGeometry(1, 32, 32), material);
      body.scale.set(0.8, 1, 0.5);
      body.position.y = 1;
      group.add(body);

      const head = new THREE.Mesh(new THREE.SphereGeometry(0.5, 32, 32), material);
      head.position.set(0, 1.8, 0.4);
      group.add(head);

      const earGeom = new THREE.ConeGeometry(0.2, 0.4, 16);
      const ear1 = new THREE.Mesh(earGeom, material);
      ear1.position.set(-0.25, 2.2, 0.2);
      ear1.rotation.z = Math.PI / 12;
      group.add(ear1);
      const ear2 = ear1.clone();
      ear2.position.x = 0.25;
      ear2.rotation.z = -Math.PI / 12;
      group.add(ear2);

      const tail = new THREE.Mesh(new THREE.CylinderGeometry(0.3, 0.5, 2, 16), material);
      tail.position.set(0, 1.5, -0.8);
      tail.rotation.x = Math.PI / 2;
      group.add(tail);

      const armGeom = new THREE.CylinderGeometry(0.1, 0.1, 0.7, 16);
      const arm1 = new THREE.Mesh(armGeom, material);
      arm1.position.set(-0.6, 1.3, 0.2);
      arm1.rotation.z = Math.PI / 2;
      group.add(arm1);
      const arm2 = arm1.clone();
      arm2.position.x = 0.6;
      group.add(arm2);

      const legGeom = new THREE.CylinderGeometry(0.15, 0.15, 0.8, 16);
      const leg1 = new THREE.Mesh(legGeom, material);
      leg1.position.set(-0.3, 0.4, 0);
      group.add(leg1);
      const leg2 = leg1.clone();
      leg2.position.x = 0.3;
      group.add(leg2);

      return group;
    }

    const squirrel = createSquirrel();
    scene.add(squirrel);

    const keys = {};
    document.addEventListener('keydown', e => (keys[e.key.toLowerCase()] = true));
    document.addEventListener('keyup', e => (keys[e.key.toLowerCase()] = false));

    let velocityY = 0;
    const speed = 0.05;
    const runSpeed = 0.1;
    const gravity = -0.005;
    let grounded = true;

    function animate() {
      requestAnimationFrame(animate);

      const moveSpeed = keys['shift'] ? runSpeed : speed;
      if (keys['w']) squirrel.position.z -= moveSpeed;
      if (keys['s']) squirrel.position.z += moveSpeed;
      if (keys['a']) squirrel.position.x -= moveSpeed;
      if (keys['d']) squirrel.position.x += moveSpeed;

      if (keys['c']) {
        squirrel.scale.y = 0.5;
      } else {
        squirrel.scale.y = 1;
      }

      if (keys[' '] && grounded) {
        velocityY = 0.15;
        grounded = false;
      }

      velocityY += gravity;
      squirrel.position.y += velocityY;
      if (squirrel.position.y <= 0) {
        squirrel.position.y = 0;
        velocityY = 0;
        grounded = true;
      }

      camera.position.set(
        squirrel.position.x + 5,
        squirrel.position.y + 5,
        squirrel.position.z + 5
      );
      camera.lookAt(squirrel.position);

      renderer.render(scene, camera);
    }

    animate();

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
